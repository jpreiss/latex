% TODO: does this belong here?
\PassOptionsToPackage{round,authoryear}{natbib}

\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{amsmath, amssymb, amsthm}
\usepackage{booktabs}
\usepackage{cleveref}
\usepackage{color}
\usepackage{comment}
\usepackage{enumitem}
\usepackage{framed}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{mathtools}
\usepackage{multicol}
\usepackage{nicefrac}
\usepackage{siunitx}
\usepackage{tcolorbox}
\usepackage{url}

% Make the penalty for breaking inline math across lines much higher.
% Override in particular equations by inserting \allowbreak.
\binoppenalty=9999
\relpenalty=9999

% For documents when the particular day is not important.
\usepackage{datetime}
\newdateformat{monthyear}{\monthname[\THEMONTH] \THEYEAR}

% Black magic from StackExchange.
% Defines mathcal macros such that \cA = \mathcal{A}, and so on.
\def\mydefc#1{\expandafter\def\csname c#1\endcsname{\mathcal{#1}}}
\def\mydefallc#1{\ifx#1\mydefallc\else\mydefc#1\expandafter\mydefallc\fi}
\mydefallc ABCDEFGHIJKLMNOPQRSTUVWXYZ\mydefallc

% Sets of numbers.
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}  % Generic field.

% Common sets.
\newcommand{\ball}{\cB}
\newcommand{\PSD}{\mathbb{S}_+}
\newcommand{\PD}{\mathbb{S}_{++}}

% Bold and blackboard symbols.
\newcommand{\one}{\mathbf{1}}
\newcommand{\zero}{\mathbf{0}}
\newcommand{\I}{\mathbb{I}}  % For an indicator random variable.

% Common fractions.
\newcommand{\recip}[1]{\frac{1}{#1}}
\newcommand{\half}{\recip{2}}
\newcommand{\invsqrt}[1]{\recip{\sqrt{#1}}}

% Common summations.
\newcommand{\sumin}{\sum_{i=1}^n}
\newcommand{\sumtn}{\sum_{t=1}^n}

% Primitives.
\DeclareMathOperator{\clip}{clip}
\DeclareMathOperator{\vol}{vol}
\DeclareMathOperator{\Vol}{Vol}  % Backwards compatibility - prefer lowercase!
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\suchthat}{such\ that}
\DeclareMathOperator{\st}{s.t.}
\DeclareMathOperator{\subjto}{subject\ to}
\DeclareMathOperator{\otherwise}{otherwise}

% Delimiters.
\DeclarePairedDelimiter{\abs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\norm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\inner}{\langle}{\rangle}
\DeclarePairedDelimiter{\ceil}{\lceil}{\rceil}
\DeclarePairedDelimiter{\floor}{\lfloor}{\rfloor}

% Linear algebra and matrices.
\DeclareMathOperator{\rank}{\mathbf{rank}}
\DeclareMathOperator{\Tr}{\mathbf{Tr}}
\DeclareMathOperator{\diag}{diag}
\newcommand{\bmat}[1]{\begin{bmatrix} #1 \end{bmatrix}}

% Calculus.
\newcommand{\partialby}[1]{\frac{\partial}{\partial #1}}

% Optimization.
\DeclareMathOperator*{\argmax}{argmax\ }
\DeclareMathOperator*{\argmin}{argmin\ }
\DeclareMathOperator*{\minimize}{minimize\ }
\DeclareMathOperator*{\maximize}{maximize\ }
\DeclareMathOperator{\OPT}{OPT}

% Geometry.
\DeclareMathOperator{\conv}{conv}
\DeclareMathOperator{\ext}{ext}

% Probability distributions.
\DeclareMathOperator{\Normal}{\mathcal{N}}
\DeclareMathOperator{\Binomial}{Binomial}
\DeclareMathOperator{\Uniform}{Uniform}

% Other probability stuff.
\newcommand{\E}{\mathbb{E}\, }
\DeclareMathOperator{\iid}{iid}
\DeclareMathOperator{\Var}{Var}
\newcommand{\Indicator}[1]{\I_{\{#1\}}}
\newcommand{\cond}{\;\middle\vert\;}

% Learning stuff.
\DeclareMathOperator{\VCdim}{VCdim}
\DeclareMathOperator{\Ldim}{Ldim}
\DeclareMathOperator{\Reg}{Reg}
\DeclareMathOperator{\pReg}{\overline{Reg}}
\DeclareMathOperator{\fat}{fat}
\DeclareMathOperator{\sfat}{sfat}
\DeclareMathOperator{\UCB}{UCB}

% Theorem counters.
\newtheorem{theorem}{Theorem}[section]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{assumptions}[theorem]{Assumptions}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{problem}[theorem]{Problem}

% Miscellaneous.
\renewcommand{\th}{^{\mathrm{th}}}

% Hyphenations.
\hyphenation{Open-AI}

% Draft annotation tools.
\newcommand{\todo}[1]{\textcolor{red}{\textbf{TODO: #1}}}

% Page layout tools.
\newtcolorbox{boxnote}{
	colback=black!8!white,
	colframe=black,
	sharp corners,
	rightrule=0.15mm,
	toprule=0.15mm,
	leftrule=0.15mm,
	bottomrule=0.15mm,
	beforeafter skip=8mm
}

